## 计算机组成原理：内存与磁盘

### 内存的物理机制

内存实际上是一个IC，内存IC又电源、地址信号、数据信号、控制信号等用于输入输出的大量引脚，通过为其指定地址，来进行数据的读写。

![](http://7xrn7f.com1.z0.glb.clouddn.com/16-6-4/54813837.jpg)

示例图片可以看出，地址信号共有十位，那么就可以表示`2`的`10`次幂个地址，也就是`1024`个地址。所以上面图片中的`IC`可以存储`1014`个`1`字节的数据，容量为`1KB`

怎么来输入数据呢？我们可以给`VCC`接入`＋5V`的电源，给`GNU`接入`0V`的电源，并使用`A0-A9`来表示数据的存储场所，然后再把数据的值输入到`D0-D7`中，并把`WR（write）`的信号设置为1，就可以在内存上写入数据了

怎么来输出数据呢？同理，参考图片

![](http://7xrn7f.com1.z0.glb.clouddn.com/16-6-4/42954666.jpg)

对于程序员就不需要过多了解内存的电源信号和控制信号等，可以使用楼房逻辑模型来理解内存

![](http://7xrn7f.com1.z0.glb.clouddn.com/16-6-4/12893955.jpg)

### 指针

指针也是一种变量，它存储的不是数据的值，而是存储着数据的内存的地址

指针的数据类型表示一次可以读写的长度


### 内存与磁盘

* 内存：利用电流存储、昂贵、高速
* 磁盘：利用磁效应、低价、低速

### 磁盘缓存

磁盘缓存：从磁盘中读取的数据存储到内存空间的方式。这样，当接下来读同一数据时，就不需要再次从磁盘读取，而是直接从磁盘缓存中取就可以了。大大改善了磁盘数据的访问速度。

### 虚拟内存

虚拟内存：把磁盘的一部分假想为内存使用

虚拟内存的方法有分段式和分页式

对于虚拟内存无法彻底搞定内存不足的问题，不断的进行置换，也会一定程序上导致程序的迟钝。

为了从根本上解决问题，需要减少运行应用文件的大小或者增加内存的大小

### 节约内存的方法

* `DLL（Dynamic Link Library）`：多个应用可以共用一个`DLL`文件，达到节约内存的作用。同时`DLL`还有其他优点：在不变更`EXE`文件的情况下，只要升级`DLL`文件就可以更新
* 通过使用`_stdcall（standard call）`来减少程序文件的大小
	* 栈处理，由调用方改为被调用方
	* 这样对于反复调用的函数，程序会小一点
	
![](http://7xrn7f.com1.z0.glb.clouddn.com/16-6-4/56623991.jpg)

### 磁盘的物理结构

磁盘的物理结构：磁盘存储数据的形式

磁盘是通过把其物理表面划分为多个空间来使用的。划分的方式有扇区方式和可变长方式，对于`windows`计算机的软盘和硬盘都是使用扇区方式。

扇区是对磁盘进行物理读写的最小单位，`windows`的一个扇区一般是512字节，磁盘读写只能使用扇区整数倍簇，同时，即使文件只写了一字节文字，空间占用512字节。这样看起来很浪费，但是如果减少扇区的容量，磁盘访问次数就会变多，导致读写文件时间变长。扇区和簇的大小，是处理速度和存储容量的平衡所决定的。


